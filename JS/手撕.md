### new

```java
/**
 * 
 * 步骤1：创建一个Func的实例对象（实例.proto = 类.prototype）
 * 步骤2：把Func 当做普通函数执行，并改变this指向
 * 步骤3：分析函数的返回值(
    值的类型 返回创建的对象
    引用类型 返回引用类型的对象)
 */
function create(...rest){
    const obj = null;
    const [constructor,...parmas] = rest;
    obj = Object.create(constructor.prototype);
    let result = constructor.apply(obj,parmas);
    return result instanceof Object ? result : obj;
}
```

### instanceof

```javascript
function _instanceof(left, right){
    let proto = Object.getPrototypeOf(left);
    let prototype = right.prototype;
    while(true){
        if(proto == prototype) return true;
        if(!proto) return false;
        proto = Object.getPrototypeOf(proto);
    }
}
```

### call 

```javascript
// call
Function.prototype.mycall() = function(context){
    if(typeof this != 'function')
        return ;
    const arg = [...arguments].slice(1);
    context = context || window
    context.fn = this
    let result = context.fn(arg)
    delete context.fn
    return result
}

```

### apply

```javascript
// apply
Function.prototype.myapply = function(context){
    if(typeof this != 'function')
        return ;
    const arg = [...arguments].slice(1)
    let result = null
    context = context || window
    context.fn = this
    if(arg)
        result = context.fn(arg)
    else 
        result = context.fn()
    delete context.fn
    return result
}
```

### bind

```javascript

```

### 图片懒加载

```javascript
function func() {  
    let scoll = document.body.scrollTop || document.documentElement.scrollTop
    let winHeight = window.innerHeight
    for(img in imgs ){
        if(img.offsetTop < scoll + winHeight)
            // 加载图片 
            img
    }
}
window.onscroll = func()
```

### 防抖

```javascript
// 防抖
function demo(func, dalay){
    var time = null;
    return function(){
        let _this = this;
        let _arg = [...arguments];
        clearTimeout(time);
        time = setTimeout(() => {
            func.apply(_this,_args);
        }, dalay);
    }
}
/* 执行第一次 */
function demo1(func, dalay){
    var time = null;
    var flag = true;
    return function(){
        let _this = this;
        let _arg = [...arguments];
        if(flag){
            flag = false
            func.apply(_this,_args);
            setTimeout( () => {
                flag = true
            }, dalay);
        }
    }
}
```

### 节流

```javascript
// 时间戳
function demo1(func,delay){
    var pre = Date.now();
    return function(){
        let _this = this;
        let _arg = [...arguments];
        let now = Date.now();
        if(now - pre >= delay){
            pre = now;
            func.apply(_this,_arg);
        }
    }
}


// 定时器
function demo(func,delay){
    var time = null;
    return function(){
        let _this = this;
        let _arg = [...arguments];
        if(!time){
            time = setTimeout(() => {
                func.apply(_this,_arg);
                time = null;
            },delay);
        }
    }
}
```

